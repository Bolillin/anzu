<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>SpartanGeek - Tienda - Solicitud de compra</title>
    <meta name="description" content="Solicitud para comprar computadoras en México" />
    <meta name="keywords" content="tienda, computadoras, pc gaming, juegos pc, nvidia, amd" />
    <meta name="author" content="SpartanGeek" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="stylesheet" type="text/css" href="/css/shop.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.min.js"></script>
  </head>
  <body>
    <!-- Google Tag Manager -->
    <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-MQWXX7"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-MQWXX7');</script>
    <!-- End Google Tag Manager -->
    <div class="container">

      <div class="fs-form-wrap" id="fs-form-wrap">
        <div class="fs-title">
          <img src="/images/logo.png" alt="Tienda de computadoras SpartanGeek">
        </div>
        <form id="myform" class="fs-form fs-form-full" autocomplete="off">
          <ol class="fs-fields">
            <li data-input-trigger>
              <label class="fs-field-label fs-anim-upper" for="projects" data-info="Para decidir la gama de GPU mínima que necesitas">¿Qué tipo de proyectos realizas?</label>
              <div class="fs-checkbox-group fs-checkbox-custom fs-checkbox-custom-small clearfix fs-anim-lower">
                <span>
                  <input id="qcomp-keyboard" type="checkbox" name="projects" value="dibujos2d">
                  <label for="qcomp-keyboard" class="components-draw">Dibujo 2D</label>
                </span>
                <span>
                  <input id="qcomp-mouse" type="checkbox" name="projects" value="modelado3d">
                  <label for="qcomp-mouse" class="components-3dmodel">Modelado 3D</label>
                </span>
                <span>
                  <input id="qcomp-monitor" type="checkbox" name="projects" value="renders">
                  <label for="qcomp-monitor" class="components-render">Renders</label>
                </span>
                <span>
                  <input id="qcomp-headset" type="checkbox" name="projects" value="vistas360">
                  <label for="qcomp-headset" class="components-360view">Vistas 360 / Recorridos</label>
                </span>
              </div>
            </li>
            <li data-input-trigger>
              <label class="fs-field-label fs-anim-upper" for="software">¿Qué programas utilizas?</label>
              <input class="fs-anim-lower" id="software" name="software" type="text" placeholder="AutoCad, Photoshop" required/>
            </li>
            <li data-input-trigger>
              <label class="fs-field-label fs-anim-upper" for="extra">¿Necesitas alguno de estos componentes?</label>
              <div class="fs-checkbox-group fs-checkbox-custom fs-checkbox-custom-small clearfix fs-anim-lower">
                <span>
                  <input id="qcomp-keyboard" type="checkbox" name="extra" value="keyboard">
                  <label for="qcomp-keyboard" class="components-keyboard">Teclado</label>
                </span>
                <span>
                  <input id="qcomp-mouse" type="checkbox" name="extra" value="mouse">
                  <label for="qcomp-mouse" class="components-mouse">Mouse</label>
                </span>
                <span>
                  <input id="qcomp-monitor" type="checkbox" name="extra" value="monitor">
                  <label for="qcomp-monitor" class="components-monitor">Monitor</label>
                </span>
                <span>
                  <input id="qcomp-tablet" type="checkbox" name="extra" value="tableta">
                  <label for="qcomp-tablet" class="components-bamboo">Tableta</label>
                </span>
                <span>
                  <input id="qcomp-none" type="checkbox" name="extra" value="none"/>
                  <label for="qcomp-none" class="components-none">No necesito</label>
                </span>
              </div>
            </li>
            <li>
              <label class="fs-field-label fs-anim-upper" for="budget" data-info="En múltiplos de $1000">¿Cual es tu presupuesto?</label>
              <input class="fs-mark fs-anim-lower" id="budget" name="budget" type="number" placeholder="15000" step="1000" min="12000" required />
            </li>
            <li data-input-trigger>
              <label class="fs-field-label fs-anim-upper" for="buydelay">¿En cuantos días planeas hacer la compra?</label>
              <div class="fs-radio-group fs-radio-custom fs-radio-custom-small clearfix fs-anim-lower">
                <span>
                  <input id="qgamesa" name="buydelay" type="radio" value="0"/>
                  <label for="qgamesa" class="games-noicon">Ahora</label>
                </span>
                <span>
                  <input id="qgamesb" name="buydelay" type="radio" value="10"/>
                  <label for="qgamesb" class="games-noicon">10 días</label>
                </span>
                <span>
                  <input id="qgamesc" name="buydelay" type="radio" value="30"/>
                  <label for="qgamesc" class="games-noicon">30 días</label>
                </span>
                <span>
                  <input id="qgamesd" name="buydelay" type="radio" value="50"/>
                  <label for="qgamesd" class="games-noicon">Más de un mes</label>
                </span>
                <span>
                  <input id="qgamese" name="buydelay" type="radio" value="365"/>
                  <label for="qgamese" class="games-noicon">Sólo estoy viendo</label>
                </span>
              </div>
            </li>
            <li>
              <label class="fs-field-label fs-anim-upper" for="estado" data-info="En caso de que estés en el DF podrías pasar por ella">¿En dónde estás ubicado?</label>
              <div class="fs-anim-lower">
                <select id="estado" name="estado">
                  <option value="Aguascalientes">Aguascalientes</option>
                  <option value="Baja California">Baja California</option>
                  <option value="Baja California Sur">Baja California Sur</option>
                  <option value="Campeche">Campeche</option>
                  <option value="Coahuila de Zaragoza">Coahuila de Zaragoza</option>
                  <option value="Colima">Colima</option>
                  <option value="Chiapas">Chiapas</option>
                  <option value="Chihuahua">Chihuahua</option>
                  <option value="Ciudad de México" selected="selected">Ciudad de México</option>
                  <option value="Durango">Durango</option>
                  <option value="Guanajuato">Guanajuato</option>
                  <option value="Guerrero">Guerrero</option>
                  <option value="Hidalgo">Hidalgo</option>
                  <option value="Jalisco">Jalisco</option>
                  <option value="México">México</option>
                  <option value="Michoacán">Michoacán</option>
                  <option value="Morelos">Morelos</option>
                  <option value="Nayarit">Nayarit</option>
                  <option value="Nuevo León">Nuevo León</option>
                  <option value="Oaxaca">Oaxaca</option>
                  <option value="Puebla">Puebla</option>
                  <option value="Querétaro">Querétaro</option>
                  <option value="Quintana Roo">Quintana Roo</option>
                  <option value="San Luis Potosí">San Luis Potosí</option>
                  <option value="Sinaloa">Sinaloa</option>
                  <option value="Sonora">Sonora</option>
                  <option value="Tabasco">Tabasco</option>
                  <option value="Tamaulipas">Tamaulipas</option>
                  <option value="Tlaxcala">Tlaxcala</option>
                  <option value="Veracruz">Veracruz</option>
                  <option value="Yucatán">Yucatán</option>
                  <option value="Zacatecas">Zacatecas</option>
                </select>
              </div>
            </li>
            <li>
              <label class="fs-field-label fs-anim-upper" for="user_phone">¿Cual es tu teléfono?</label>
              <input class="fs-anim-lower" id="user_phone" name="user_phone" type="text" placeholder="5510203040" required/>
            </li>
            <li>
              <label class="fs-field-label fs-anim-upper" for="content">¿Algún comentario extra sobre la PC que quieres? <span style="color:#B8C6E8;color: rgba(255, 255, 255, 0.45);">(lo puedes dejar en blanco)</span></label>
              <textarea class="fs-anim-lower" id="content" name="content" placeholder="Describe aquí"></textarea>
            </li>
          </ol><!-- /fs-fields -->
          <button class="fs-submit" type="submit">Quiero comprar una Spartana</button>
          <div class="fs-messages">
            <p class="alert alert-success">Tu solicitud se ha enviado correctamente. Pronto nos pondremos en contacto contigo.</p>
            <p class="alert alert-warning">Hubo un problema al enviar la solicitud, intenta nuevamente.</p>
          </div>

        </form><!-- /fs-form -->
      </div><!-- /fs-form-wrap -->

    </div><!-- /container -->
    <script type="text/javascript" src="/js/config.js"></script>
    <script src="/js/shop.js"></script>
    <script>
      var getUrlParameter = function getUrlParameter(sParam) {
        var sPageURL = decodeURIComponent(window.location.search.substring(1)),
        sURLVariables = sPageURL.split('&'),
        sParameterName,
        i;

        for (i = 0; i < sURLVariables.length; i++) {
          sParameterName = sURLVariables[i].split('=');

          if (sParameterName[0] === sParam) {
            return sParameterName[1] === undefined ? true : sParameterName[1];
          }
        }
      };

      if(getUrlParameter('email') && getUrlParameter('name')) {
        console.log(getUrlParameter('email'), getUrlParameter('name'))
        $.ajax({
          url: layer_path + 'leads',
          type: "POST",
          data: JSON.stringify({
            name: getUrlParameter('name'),
            email: getUrlParameter('email')
          }),
          contentType: "application/json"
        }).done(function(data) {
          console.log(data);
        }).fail(function(data) {
          console.log(data);
        });
      }

      function isArray(obj) {
        return Object.prototype.toString.call(obj) === '[object Array]';
      }

      $.fn.serializeObject = function() {
        var o = {};
        var a = this.serializeArray();
        $.each(a, function() {
            if (o[this.name]) {
                if (!o[this.name].push) {
                    o[this.name] = [o[this.name]];
                }
                o[this.name].push(this.value || '');
            } else {
                o[this.name] = this.value || '';
            }
        });
        return o;
      };

      (function() {
        var formWrap = document.getElementById( 'fs-form-wrap' );

        new FForm( formWrap, {
          onReview : function() {
            classie.add( document.body, 'overview' );
          }
        } );

        $("#myform").on("submit", function( event ) {
          event.preventDefault();

          dataLayer.push({
            'event': 'requestEstimate'
          });

          $('.alert.alert-warning').removeClass('show');
          $('.fs-submit').html('Enviando...');

          var payload = $(this).serializeObject();
          payload.user = {
            name: getUrlParameter('email'),
            email: getUrlParameter('name'),
            phone: payload.user_phone
          };
          payload.games = games_list[payload.games];
          payload.budget = parseInt(payload.budget);
          payload.buydelay = parseInt(payload.buydelay);
          delete payload.user_name;
          delete payload.user_email;
          delete payload.user_phone;

          // Extra as Array
          if( !isArray( payload.extra ) ) {
            payload.extra = [payload.extra];
          }

          payload = JSON.stringify(payload);
          console.log(payload);

          if(!payload.content) {
            payload.content = "Sin comentarios";
          }

          $.ajax({
            url: layer_path + 'store/order',
            type: "POST",
            data: payload,
            contentType: "application/json"
          }).done(function(data) {
            console.log(data);
            $('.fs-submit').addClass('hide');
            $('.alert.alert-success').addClass('show');
          }).fail(function(data) {
            $('.alert.alert-warning').addClass('show');
            $('.fs-submit').html('Quiero comprar una Spartana');
          });
        });

      })();
    </script>
  </body>
</html>