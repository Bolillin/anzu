  <main class="main-reader">
    <div class="row row-no-padding">
      <div class="col-md-4" ng-class="{'col-md-6': false, 'col-md-4': false}">
        <div class="row row-no-padding">
          <div class="col-md-12" ng-class="{'hide-for-small-only': activePostId !== null}">
            <div class="current-board">
              <div class="title">
                <div class="row">
                  <div class="col-md-7">
                    <a href="/" class="btn btn-default btn-sm" ng-if="category.slug != null"><i class="fa fa-chevron-left"></i></a>
                    <h2>{{ category.name || "Todas las publicaciones" }}</h2>
                  </div>
                  <div class="col-md-5 text-right">
                    <a href="/post/create/{{ category.slug }}" class="btn btn-primary btn-sm" ng-if="user.isLogged">Crear publicación</a>
                    <a href="" ng-click="signIn()" class="btn btn-primary btn-sm" ng-if="!user.isLogged">Crear publicación</a>
                  </div>
                </div>
              </div>

              <ul class="discussions-list always-visible" scroll-me="walkFeed()" ng-hide="resolving_posts" adjust-height-feed>
                <li data-id="{{ post.id }}" class="discussion-summary" ng-class="{'active': post.id === $parent.activePostId}" ng-repeat="post in posts" ng-cloak>
                  <div>
                    <a href="/u/{{ post.author.username }}/{{ post.author.id }}" title class="author" data-original-title="Escrito por {{ post.author.username }} hace {{ post.created_at | timeago }}">
                      <img class="avatar hidden" gravatar-src="post.author.email" gravatar-default="http://river.spartangeek.com/images/no-thumb.png" />
                      <span class="avatar " style="background: #305FA9;">{{:: post.author.username[0].toUpperCase() }}</span>
                    </a>
                    <a href="/p/{{ post.slug }}/{{ post.id }}" class="main">
                      <h3 class="title">{{:: post.title }}</h3>
                      <ul class="info">
                        <li class="hidden">
                          <span>
                            <span class="username">Dadang-San</span> replied <time>12h ago</time>
                          </span>
                        </li>
                        <li class="">
                          <span>
                            Escrito por <span class="username">{{:: post.author.username }}</span> <time>hace {{:: post.created_at | timeago }}</time>
                          </span>
                        </li>
                      </ul>
                      <ul class="extra-info">
                        <li class="category" ng-if="category.slug === '' || true">
                          <span class="ball" ng-style="{'background-color': post.category.color}"></span>
                          <span class="name">{{ post.category.name }}</span>
                        </li>
                        <li class="pinned" ng-if="post.pinned">
                          <i class="fa fa-exclamation-circle"></i> <span>Importante</span>
                        </li>
                      </ul>
                    </a>
                    <span class="count">{{ post.comments.count }}<span class="label">{{ post.comments.count==1?'Respuesta':'Respuestas'}}</span></span>
                  </div>
                </li>
                <div class="resolving" style="position: relative; z-index: 1002;" ng-hide="resolving_posts"><i class="fa fa-circle-o-notch fa-spin"></i></div>
              </ul>

              <div class="resolving" ng-hide="!resolving_posts">
                <i class="fa fa-circle-o-notch fa-spin"></i>
              </div>

              <div class="segments">
                <h2>Categorías disponibles</h2>
                <div id="tags">
                  <div ng-repeat="c in categories" ng-class="{'active': category.slug === c.slug}">
                    <span class="ball" ng-class="{'empty': !c.color}" ng-style="{'background-color': c.color}"></span>
                    <a href="/c/{{ c.slug }}"><span class="name">{{ c.name }}</span></a>
                    <span class="count">{{ c.count }}</span>
                    <a href="/"><i class="fa fa-times" ng-if="category.slug === c.slug"></i></a>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="col-md-8" ng-class="{'col-md-6': false, 'col-md-8': false}">
        <div class="current-article" ng-controller="ReaderViewController" adjust-height>

          <div class="waiting" ng-show="waiting">
            <img src="/images/head.png" />
            <h4>Únete a la conversación</h4>
            <p>Puedes ver a la <strong>izquierda</strong> las publicaciones de otros espartanos, nuestros foros y nuestras recomendaciones, empieza viendo y únete a la conversación.</p>
          </div>

          <div ng-hide="waiting">
            <header class="hero discussion-hero hidden" ng-style="{'background-image': 'url(/images/boards/' + post.category.slug + '.png)'};" ng-if="!resolving" style="background-image: url(http://agis.spartangeek.dev:8888/images/boards/recommendations.png);">
              <div class="container">
                <ul class="discussion-hero-items">
                  <li class="">
                    <span class="category-label ng-binding">{{ post.category.name }}</span>
                  </li>
                  <li class="block-item">
                    <h2 class="discussion-title ng-binding">{{ post.title }}</h2>
                  </li>
                </ul>
              </div>
            </header>

            <div class="author" ng-hide="resolving">
              <div class="row">
                <div class="col-md-1 col-sm-3">
                  <span class="avatar" title="{{ post.author.username }}" ng-if="!post.author.image">{{ post.author.username[0] }}</span>
                  <img class="avatar" ng-src="{{ post.author.image }}" alt="{{ post.author.username }}" ng-if="post.author.image">
                </div>

                <div class="col-md-5 col-sm-9">
                  <div class="user-info">
                    <span class="username">{{ post.author.username }}</span>
                    <p class="description">{{ post.author.description || "Just another Spartan Geek" }}</p>
                  </div>
                </div>

                <div class="col-md-6">
                  <div class="category-preview" ng-style="{'background-image': 'url(/images/boards/' + post.category.slug + '.png)'};">
                    <p class="category-label">{{ post.category.name }}</p>
                  </div>
                </div>
              </div>
            </div>

            <div class="resolving" ng-hide="resolving == false">
              <i class="fa fa-circle-o-notch fa-spin"></i>
            </div>

            <div ng-hide="resolving">

              <h2 class="discussion-title">{{ post.title }}</h2>

              <div class="content" ng-if="post.type !== 'recommendations'" marked="post.content">
              </div>

              <div class="recommendations" ng-if="post.type === 'recommendations'">

                <div class="content" marked="post.content"></div>

                <div class="row">
                  <div class="col-md-9">
                <div class="components">
                  <div ng-if="post.components.cpu.content" class="component">
                    <div class="row">
                      <div class="col-md-2 col-sm-3">
                        <img src="/images/components/cpu.png" alt="CPU" />
                      </div>

                      <div class="col-md-10 col-sm-9">
                        <h6>Procesador <span class="status" ng-if="post.components.cpu.status == 'needed'">Lo necesito</span> <span class="status owned" ng-if="post.components.cpu.status == 'owned'">Ya lo tengo</span></h6>
                        {{ post.components.cpu.content }}
                      </div>
                    </div>
                  </div>

                  <div ng-if="post.components.motherboard.content" class="component">
                    <div class="row">
                      <div class="col-md-2 col-sm-3">
                        <img src="/images/components/motherboard.png" alt="CPU" />
                      </div>

                      <div class="col-md-10 col-sm-9">
                        <h6>Motherboard <span class="status" ng-if="post.components.motherboard.status == 'needed'">Lo necesito</span> <span class="status owned" ng-if="post.components.motherboard.status == 'owned'">Ya lo tengo</span></h6>
                        {{ post.components.motherboard.content }}
                      </div>
                    </div>
                  </div>

                  <div ng-if="post.components.cabinet.content" class="component">
                    <div class="row">
                      <div class="col-md-2 col-sm-3">
                        <img src="/images/components/cabinet.png" alt="CPU" />
                      </div>

                      <div class="col-md-10 col-sm-9">
                        <h6>Gabinete <span class="status" ng-if="post.components.cabinet.status == 'needed'">Lo necesito</span> <span class="status owned" ng-if="post.components.cabinet.status == 'owned'">Ya lo tengo</span></h6>
                        {{ post.components.cabinet.content }}
                      </div>
                    </div>
                  </div>

                  <div ng-if="post.components.ram.content" class="component">
                    <div class="row">
                      <div class="col-md-2 col-sm-3">
                        <img src="/images/components/ram.png" alt="CPU" />
                      </div>

                      <div class="col-md-10 col-sm-9">
                        <h6>Memoria RAM <span class="status" ng-if="post.components.ram.status == 'needed'">Lo necesito</span> <span class="status owned" ng-if="post.components.ram.status == 'owned'">Ya lo tengo</span></h6>
                        {{ post.components.ram.content }}
                      </div>
                    </div>
                  </div>

                  <div ng-if="post.components.screen.content" class="component">
                    <div class="row">
                      <div class="col-md-2 col-sm-3">
                        <img src="/images/components/screen.png" alt="CPU" />
                      </div>

                      <div class="col-md-10 col-sm-9">
                        <h6>Monitor <span class="status" ng-if="post.components.screen.status == 'needed'">Lo necesito</span> <span class="status owned" ng-if="post.components.screen.status == 'owned'">Ya lo tengo</span></h6>
                        {{ post.components.screen.content }}
                      </div>
                    </div>
                  </div>

                  <div ng-if="post.components.videocard.content" class="component">
                    <div class="row">
                      <div class="col-md-2 col-sm-3">
                        <img src="/images/components/videocard.png" alt="CPU" />
                      </div>

                      <div class="col-md-10 col-sm-9">
                        <h6>Tarjeta gráfica <span class="status" ng-if="post.components.videocard.status == 'needed'">Lo necesito</span> <span class="status owned" ng-if="post.components.videocard.status == 'owned'">Ya lo tengo</span></h6>
                        {{ post.components.videocard.content }}
                      </div>
                    </div>
                  </div>

                  <div ng-if="post.components.power.content" class="component">
                    <div class="row">
                      <div class="col-md-2 col-sm-3">
                        <img src="/images/components/power.png" alt="CPU" />
                      </div>

                      <div class="col-md-10 col-sm-9">
                        <h6>Fuente de Poder <span class="status" ng-if="post.components.power.status == 'needed'">Lo necesito</span> <span class="status owned" ng-if="post.components.power.status == 'owned'">Ya lo tengo</span></h6>
                        {{ post.components.power.content }}
                      </div>
                    </div>
                  </div>

                  <div ng-if="post.components.storage.content" class="component">
                    <div class="row">
                      <div class="col-md-2 col-sm-3">
                        <img src="/images/components/storage.png" alt="CPU" />
                      </div>

                      <div class="col-md-10 col-sm-9">
                        <h6>Almacenamiento <span class="status" ng-if="post.components.storage.status == 'needed'">Lo necesito</span> <span class="status owned" ng-if="post.components.storage.status == 'owned'">Ya lo tengo</span></h6>
                        {{ post.components.storage.content }}
                      </div>
                    </div>
                  </div>

                  <div ng-if="post.components.cooler.content" class="component">
                    <div class="row">
                      <div class="col-md-2 col-sm-3">
                        <img src="/images/components/cooler.png" alt="CPU" />
                      </div>

                      <div class="col-md-10 col-sm-9">
                        <h6>Enfriamento <span class="status" ng-if="post.components.cooler.status == 'needed'">Lo necesito</span> <span class="status owned" ng-if="post.components.cooler.status == 'owned'">Ya lo tengo</span></h6>
                        {{ post.components.cooler.content }}
                      </div>
                    </div>
                  </div>

                  <div class="component" ng-if="post.components.software">
                    <h6>Programas que utilizaré</h6>
                    {{ post.components.software }}
                  </div>
                </div>
                  </div>
                </div>
              </div>

              <div class="answers">
                <h5>{{ post.comments.count }} respuesta{{post.comments.count == 1?'':'s'}}</h5>
              </div>

              <div class="comments">
                <div class="comment" ng-repeat="comment in (post.comments.set | orderBy : 'position')">
                  <div class="comment-author">
                    <div class="row">
                      <div class="col-md-12">
                        <img class="avatar" ng-src="{{ comment.author.image }}" alt="{{ comment.author.username }}" ng-if="comment.author.image">
                        <span class="avatar" title="{{ comment.author.username }}" ng-if="!comment.author.image">{{ comment.author.username[0] }}</span>
                        <span class="username"><strong>{{ comment.author.username }}</strong> {{ comment.author.description }}</span>
                      </div>
                    </div>
                  </div>
                  <div class="content" marked="comment.content"></div>
                  <p class="date">Escrito hace {{ comment.created_at | timeago }}</p>
                </div>
              </div>

              <div class="row">
                <div class="col-md-10">
                  <div ng-show="post.comments.count > 0 || force_comment == true || true" ng-if="user.isLogged">
                    <div class="idiot-wizzy">
                      <textarea placeholder="Escribe tu comentario..." class="form-control flexible-height content" ng-model="comment.content" ng-disabled="waiting_comment"></textarea>
                      <div class="actions">
                        <ul>
                          <li ng-show="comment.content != ''">
                            <strong>**Negrita**</strong>
                          </li>
                          <li ng-show="comment.content != ''">
                            <em>*Itálica*</em>
                          </li>
                          <li style="margin-left: 3em;">
                            <a href="" ng-click="publish()" ng-class="{'disabled': waiting_comment == true || comment.content == ''}" class="btn btn-primary btn-sm">Publicar</a>
                          </li>
                        </ul>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <div class="need-signin" ng-if="!user.isLogged">
                <p>¿Quieres dejar un comentario? <a href="" ng-click="signIn()">Inicia sesión</a> o <a href="" ng-click="signUp()">Crea una cuenta</a></p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>